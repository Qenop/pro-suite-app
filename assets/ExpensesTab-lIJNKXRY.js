import{u as v,r as t,a as f,j as e}from"./index-Czh7mnsa.js";const S=()=>{const{property:n}=v(),[i,N]=t.useState([]),[r,x]=t.useState(""),[l,m]=t.useState(""),[o,u]=t.useState(""),[p,a]=t.useState(""),[h,b]=t.useState(""),[c,j]=t.useState(!1),d=t.useCallback(async()=>{try{const s=await f.get(`/properties/${n._id}/expenses`);N(s.data)}catch(s){console.error(s),a("Failed to fetch expenses")}},[n._id]);t.useEffect(()=>{d()},[d]);const y=async s=>{if(s.preventDefault(),a(""),b(""),!r||!l||!o){a("Please fill in all fields");return}try{await f.post(`/properties/${n._id}/expenses`,{amount:r,description:l,date:o}),b("Expense recorded successfully"),x(""),m(""),u(""),d(),setTimeout(()=>{j(!1)},800)}catch(g){console.error(g),a("Failed to record expense")}};return e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Expenses"}),e.jsx("button",{onClick:()=>j(!c),className:"mb-4 bg-cyan-700 text-white px-4 py-2 rounded hover:bg-black",children:c?"Close Form":"Add New Expense"}),e.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${c?"max-h-screen opacity-100":"max-h-0 opacity-0"}`,children:e.jsxs("form",{onSubmit:y,className:"mb-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Amount"}),e.jsx("input",{type:"number",value:r,onChange:s=>x(s.target.value),className:"w-full border rounded p-2",placeholder:"Enter amount"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Description"}),e.jsx("input",{type:"text",value:l,onChange:s=>m(s.target.value),className:"w-full border rounded p-2",placeholder:"Enter description"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Date of Expense"}),e.jsx("input",{type:"date",value:o,onChange:s=>u(s.target.value),className:"w-full border rounded p-2"})]}),e.jsx("button",{type:"submit",className:"bg-orange-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Add Expense"}),p&&e.jsx("p",{className:"text-red-600 mt-2",children:p}),h&&e.jsx("p",{className:"text-green-600 mt-2",children:h})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Recorded Expenses"}),i.length===0?e.jsx("p",{className:"text-gray-500",children:"No expenses recorded yet."}):e.jsx("ul",{className:"space-y-2",children:i.map(s=>e.jsxs("li",{className:"border p-2 rounded",children:[e.jsxs("div",{className:"font-semibold",children:["KES ",s.amount]}),e.jsx("div",{className:"text-sm text-gray-700",children:s.description}),e.jsxs("div",{className:"text-xs text-gray-500",children:["On ",new Date(s.date).toLocaleDateString()," | Recorded: ",new Date(s.createdAt).toLocaleString()]})]},s._id))})]})]})};export{S as default};
