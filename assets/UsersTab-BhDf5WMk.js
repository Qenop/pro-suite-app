import{u as p,r as t,a as j,j as e,U as b}from"./index-sFQCxi-d.js";const N=()=>{const{property:r}=p(),[c,x]=t.useState([]),[n,o]=t.useState(!1),[a,i]=t.useState(""),[l,h]=t.useState(!1),d=t.useCallback(async()=>{if(r!=null&&r._id){o(!0),i("");try{const s=await j.get(`/users/by-property/${r._id}`);x(s.data)}catch{i("Failed to load users for this property.")}finally{o(!1)}}},[r]);t.useEffect(()=>{d()},[d]);const m=()=>{d(),h(!1)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold",children:["Users for ",r.propertyName]}),e.jsx("button",{onClick:()=>h(s=>!s),className:"px-4 py-2 bg-cyan-700 text-white rounded hover:bg-black",children:l?"Cancel":"Add User"})]}),e.jsx("div",{style:{maxHeight:l?"1000px":"0",overflow:"hidden",transition:"max-height 0.5s ease"},children:l&&e.jsx(b,{onSuccess:m,defaultPropertyId:r._id})}),n&&e.jsx("p",{children:"Loading users..."}),a&&e.jsx("p",{className:"text-red-600",children:a}),!n&&!a&&e.jsxs("table",{className:"min-w-full border border-gray-300 rounded shadow mt-4",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 border",children:"Full Name"}),e.jsx("th",{className:"p-2 border",children:"Email"}),e.jsx("th",{className:"p-2 border",children:"Phone"}),e.jsx("th",{className:"p-2 border",children:"Role"}),e.jsx("th",{className:"p-2 border",children:"Actions"})]})}),e.jsxs("tbody",{children:[c.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"p-4 text-center text-gray-500",children:"No users assigned to this property."})}),c.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-2 border",children:s.fullName}),e.jsx("td",{className:"p-2 border",children:s.email}),e.jsx("td",{className:"p-2 border",children:s.phone}),e.jsx("td",{className:"p-2 border capitalize",children:s.role}),e.jsxs("td",{className:"p-2 border space-x-2",children:[e.jsx("button",{className:"text-sm text-blue-600 hover:underline",children:"Edit"}),e.jsx("button",{className:"text-sm text-red-600 hover:underline",children:"Delete"})]})]},s._id))]})]})]})};export{N as default};
